{% extends 'applications/base.html' %}
{% block title %}Step 1 â€“ General Info{% endblock %}

{% block content %}
<h2 class="mb-3">Step 1: General Information</h2>
<!--Sweet alert-->
{% for message in messages %}
    {% if 'error' in message.tags %}
    <script>
        document.addEventListener("DOMContentLoaded", function () {
        Swal.fire({
            icon: "error",
            title: "Error",
            text: "{{ message|escapejs }} ",
            confirmButtonText: "OK",
        });
        });
    </script>
    {% else %}
        <script>
        document.addEventListener("DOMContentLoaded", function () {
        Swal.fire({
            icon: "success",
            title: "Success",
            text: "{{ message|escapejs }} ",
            confirmButtonText: "OK",
        });
        });
    </script>
    {% endif %}
{% endfor %}


<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="row g-3">

        <div class="col-12 col-sm-6">
            <div class="form-group">
                <label>First Name <small class="text-danger">*</small></label>
                <input name="first_name" class="form-control" value="{{ data.first_name|default:'' }}" required>
            </div>
        </div>

        <div class="col-12 col-sm-6">
            <div class="form-group">
                <label>Last Name <small class="text-danger">*</small></label>
                <input name="last_name" class="form-control" value="{{ data.last_name|default:'' }}" required>
            </div>
        </div>

        <div class="col-12 col-sm-6">
            <div class="form-group">
                <label>Date of Birth <small class="text-danger">*</small></label>
                <input type="date" name="date_of_birth" class="form-control" value="{{ data.date_of_birth|default:'' }}" required>
            </div>
        </div>

        <div class="col-12 col-sm-6">
            <div class="form-group">
                <label>NRC Number <small class="text-danger">*</small></label>
                <input name="NRC" class="form-control" maxlength="15" value="{{ data.NRC|default:'' }}" required>
            </div>
        </div>

        <div class="col-12 col-sm-6">
            <div class="form-group">
                <label>Scan of NRC <small class="text-danger">PDF ONLY</small></label>
                <input type="file" name="NRC_scan" class="form-control" accept="application/pdf">
            </div>
        </div>

        <div class="col-12 col-sm-6">
            <div class="form-group">
                <label>Gender <small class="text-danger">*</small></label>
                <select name="gender" class="form-control" required>
                    <option value="">Select Gender</option>
                    <option value="M" {% if data.gender == 'M' %}selected{% endif %}>Male</option>
                    <option value="F" {% if data.gender == 'F' %}selected{% endif %}>Female</option>
                </select>
            </div>
        </div>

        <div class="col-12 col-sm-6">
            <div class="form-group">
                <label>Disability <small class="text-danger">*</small></label>
                <select name="disability" class="form-control" id="disability" required>
                    <option value="No" {% if data.disability|lower == 'no' %}selected{% endif %}>No</option>
                    <option value="Yes" {% if data.disability|lower == 'yes' %}selected{% endif %}>Yes</option>
                </select>
            </div>
        </div>

        <div class="col-12 col-sm-6">
            <div class="form-group">
                <label>If Yes, Select Disability</label>
                <select name="disability_desc" class="form-control" id="disability_desc">
                    <option value="">No disability</option>
                    <option value="vision" {% if data.disability_desc == 'vision' %}selected{% endif %}>Vision</option>
                    <option value="hearing" {% if data.disability_desc == 'hearing' %}selected{% endif %}>Hearing</option>
                    <option value="speech" {% if data.disability_desc == 'speech' %}selected{% endif %}>Speech</option>
                    <option value="mobility" {% if data.disability_desc == 'mobility' %}selected{% endif %}>Mobility</option>
                </select>
            </div>
        </div>

        <div class="col-12 col-sm-6">
            <div class="form-group">
                <label>Nationality <small class="text-danger">*</small></label>
                <input name="nationality" class="form-control" value="{{ data.nationality|default:'' }}" required>
            </div>
        </div>

        <div class="col-12 col-sm-6">
            <div class="form-group">
                <label>Email <small class="text-danger">*</small></label>
                <input type="email" name="email" class="form-control" value="{{ data.email|default:'' }}" required>
            </div>
        </div>

        <div class="col-12 col-sm-6">
            <div class="form-group">
                <label>Phone Number <small class="text-danger">*</small></label>
                <input name="phone_number" class="form-control" value="{{ data.phone_number|default:'' }}" required>
            </div>
        </div>

        <div class="col-12 col-sm-6">
            <div class="form-group">
                <label>Address <small class="text-danger">*</small></label>
                <textarea name="address" class="form-control" required>
                {{ data.address|default:'' }}
                </textarea>
            </div>
        </div>

        <div class="col-12 col-sm-6">
            <div class="form-group">
                <label>Programme <small class="text-danger">*</small></label>
                <select name="program" class="form-control" required>
                    <option value="">Select Programme</option>
                    {% for program in programs %}
                        <option value="{{ program.id }}">{{ program.program_title }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <div class="col-12 col-sm-6">
            <div class="form-group">
                <label>Deposit Slip <small class="text-danger">*</small></label>
                <input type="file" name="deposit_slip" class="form-control" accept="application/pdf,image/*" required>
            </div>
        </div>

        <div class="col-12 col-sm-6">
            <div class="form-group">
                <label>Passport Photo <small class="text-danger">*</small></label>
                <input type="file" name="passport_photo" class="form-control" accept="image/*" required>
            </div>
        </div>

        <!-- Actions -->
        <div class="col-12 d-flex justify-content-end mt-3">
            <button class="btn btn-primary btn-sm" type="submit">Next</button>
        </div>

    </div>
</form>
{% endblock %}
